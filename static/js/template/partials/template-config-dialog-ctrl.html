<style>
	.c-allthumbImage {
		max-width: 77px;
		max-height: 120px;
		margin: 20px 0 10px 0;
		height:96px;
		width:100%;
	}

	.form-group label {
		width: 85px;
		display: inline-block;
		line-height: 34px;
		height: 34px;
	}

	/* for Firefox & IE7 */
	* html .c-allthumbImage {
		/* for IE6 */
		width: expression(this.width > 77 && this.width > this.height ? 77 : auto);
		height: expression(this.height > 120 ? 120 : auto);
	}

	.linetitle {
		margin-top: 35px;
		height: 20px;
		line-height: 20px;
		color: #EF8300;
		border-bottom: 1px solid #EF8300;
		font-weight: normal;
	}

	.form-sm-group input[type='checkbox'], .form-sm-group input[type="radio"] {
		margin: 10px 10px 0 0;
	}

	.form-group .custom label {
		width: auto;
		padding-right: 5px;
		height: 26px;
		line-height: 26px;
	}

	.form-group .custom input {
		width: 52px;
		height: 24px;
		border: 1px solid #dedede;
		float: left;
	}


	.blk-box{
		height: 162px;
		max-height: 162px;
		position:relative;
	}
	
	.blk-box i{
		position: absolute;
		left: 70%;
		top: 63%;
		cursor: pointer;
		background-color: green;
		color: #ffffff;
		width: 13px;
		height: 13px;
		padding:0;
		margin:0;
	}
	
</style>
<div class="nsw">
	<div class="modal-header">
		<h3 class="modal-title">版块编辑</h3>
		<a class="diaremove" ng-click="cancel()"></a>
	</div>
	<div class="modal-body">
		<tabset>
			<tab heading="模板" active>
				<div style="height:320px;overflow-y:scroll">
					<div class="row c-tpl-list">
						<p class="col-sm-2 blk-box" ng-repeat="(key,item) in setting.pubBlkTpls">

							<img class="c-tpl-item c-allthumbImage" ng-click="tplSelected(item)"
							     ng-repeat="attr in item.confData" ng-if="attr.name=='blkIcon'"
							     nsw-src="{{attr.value == null||attr.value == '' ? sysBasePath+'/img/nsw.png':attr.value}}"  ng-mouseover="tplShow(item);" ng-mouseout="tplHide();">
							<i class="fa fa-times" ng-click="removeTpl(item,true);" ng-show="item._id === tplId" ng-mouseover="tplShow(item);"></i>

							<img class="c-tpl-item c-allthumbImage" ng-click="tplSelected(item)"
							     ng-if="!item.confData"
							     nsw-src="{{sysBasePath+'/img/nsw.png'}}" ng-mouseover="tplShow(item);" ng-mouseout="tplHide();">
							<span data-ng-bind="item.name"></span>
							<img class="c-tpl-selected-img {{item._id === setting.projBlkTpl._id ? 'selected' : ''}}"
							     nsw-src="{{sysBasePath}}/img/tpl/selected.png" ng-mouseover="tplShow(item);">

						</p>
					</div>
					<div class="row c-tpl-list" data-ng-show='setting.projBlkTplList'>
						<h5 align="left" class="linetitle ng-scope"><span>我的模板</span></h5>

						<p class="col-sm-2 blk-box" style="height: 165px;overflow: hidden" ng-repeat="(key,item) in setting.projBlkTplList">
						     <img class="c-tpl-item c-allthumbImage" ng-click="tplSelected(item)"
							     ng-repeat="attr in item.confData" ng-if="attr.name=='blkIcon'"
							      nsw-src="{{attr.value == null||attr.value == '' ? sysBasePath+'/img/nsw.png':attr.value}}" ng-mouseover="tplShow(item);" ng-mouseout="tplHide();">
							<i class="fa fa-times" ng-click="removeTpl(item,false);" ng-show="item._id === tplId" ng-mouseover="tplShow(item);"></i>     

							<img class="c-tpl-item c-allthumbImage" ng-click="tplSelected(item)"
							     ng-if="!item.confData"
							     nsw-src="{{sysBasePath+'/img/nsw.png'}}" ng-mouseover="tplShow(item);" ng-mouseout="tplHide();">
							     
							<span data-ng-bind="item.name"></span>
							<img data-ng-class="{selected:item._id===setting.projBlkTpl._id}" class="c-tpl-selected-img"
							     nsw-src="{{sysBasePath}}/img/tpl/selected.png" ng-mouseover="tplShow(item);">
						</p>
					</div>
				</div>
			</tab>
			<tab heading="数据源"  data-ng-if="setting.tplDs.comp">
				<div style="height:320px;overflow-y:scroll;padding-top: 20px" ng-form="blkDsForm"  data-ng-if="setting.tplDs.comp">
					<div platform-form data-options="formOptions" data-on-property-changed="onPropertyChanged"></div>
				</div>
			</tab>
			<tab heading="选项">
				<div style="height:320px;overflow-y:scroll">
					<div class="c-tpl-options">
						<div data-platform-dynamic-form template="setting.blkTplConfData"></div>
					</div>
				</div>
			</tab>
			<tab heading="源码">
				<div style="height:320px;">
					<div class="row">
						<div class="col-xs-12">
							<div data-platform-ace-editor
							     data-ng-model="setting.projBlkTpl.htmlContent"
							     data-editor-width="690px"
							     data-editor-height="310px"
							     data-mode="html"
							     data-theme="terminal"></div>
						</div>

					</div>
				</div>
			</tab>
		</tabset>
	</div>
	<div class="modal-footer">

		<button class="btn btn-primary btn-color" ng-click="save()"><label class="checkright"></label><span
				class="btntext">确&nbsp;定</span></button>
		<button class="btn btn-default btn-color btn-cancel" ng-click="cancel()"><label
				class="checkcancel"></label><span class="btntext black">取&nbsp;消</span></button>
	</div>

	<a class="col-xs-2 pull-right" href="###" ng-click="switchBlkType(setting.pubBlkTpls);" style="text-decoration:underline;text-align:right;margin-top:-25px;">切换到版块选择</a>

</div>
