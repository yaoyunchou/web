<style type="text/css">   
    .lighter-weight{font-weight: lighter;}     
    .w100{width: 100px;}
    .ml{margin-left: 16px;}
    .pt20{padding-top: 20px;}
    .mess-zx{line-height: 36px;color: #847D7D;}
    .btn-hover{margin-left: 16px;color: #796A6A}
    .btn-hover:hover{border-color: #f08300;color: #f08300!important;}     
    .pt0{padding-top: 0!important;}   
    .form-validation .form-control.ng-dirty.ng-invalid{border-color: #f44336;}
    .err{color: #f44336;}
    .form-validation .form-control.ng-dirty.ng-valid,
    .form-validation .form-control.ng-dirty.ng-valid:focus {border-color: #4caf50;}   
    .left-info-err{position: absolute;top: 22px;left: 70px;}
    .left-info-input{margin:0 8px; width: 120px;display: inline;}
    .left-info{position: absolute;top: 18px;right: 70px;}
    .left-info-st{display:none;top:70px;right:90px;}
    .mask{position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 1050;overflow: hidden;-webkit-overflow-scrolling: touch;outline: 0;background: #000;opacity: 0.5;}
    .dialog{position: fixed;z-index: 1100;top: 115px;left: 22%;background-color: #fff;padding: 0;}
    .dialog-titlebar { padding: 0 10px 0 20px;height: 44px;background: #f5f5f5;}
    .dialog-title {float: left;font: 14px/44px "Microsoft YaHei";color: #f08300;}
    .close-btn{float: right;margin-top: 14px;}
    .clean-btn{margin: 0px 0px 0px 18px;width: 82px;}
    .border-slt{border: 1px solid #ddd;}
    .pr{position: relative;}
    .tab-pane{border: 1px solid #ddd;border-top: none;}
    /* .btn-hover:hover, a:hover {border-color: #f08300; color: #f08300!important;} */
    
    
    .loopbox{ height:128px; position:relative; width:542px; padding: 0; overflow:hidden; float: left;}
    .loopbox ul{ position:absolute; list-style: none; padding: 0; margin:0; width:1104px; left:0; transition:left 2s;
       -moz-transition:left 2s; /* Firefox 4 */
     -webkit-transition:left 2s; /* Safari and Chrome */
    -o-transition:left 2s; /* Opera */}
    .loopbox ul.mov{ left:-552px;}
    .loopbox ul.back{left:0;}
    .loopbox ul li{ width:128px; height: 128px; margin-right: 10px; float: left; position:relative; list-style: none;}
    .loopbox ul li input{ position:absolute; bottom:0px;}
    .loopright,.loopleft{ float: left; margin-top: 50px; font-size: 20px; color: #f08300;}


    .tablist{ width: 45%; margin:20px 2%; float: left; }

    .tablistbody{ padding: 0 !important; height: 196px; overflow-y:auto;}
    .tablistbody .list-group-item{ border:0; border-bottom: 1px solid #ddd; margin:0; cursor: pointer;}
    .tablistbody .list-group{ margin: 0;}
    .tree-node-content{ margin:0;}



    /*----xqnav */
    .xqnva li{ padding: 0 10px; float: left;}
    .xqbox {
    border: 1px solid #d4d4d4;
    border-radius: 4px;
    margin-left: 15px;
    padding: 0;
    width: 702px;
}
    .xqbox .edui-editor{  border:none; border-radius: 0px;}
    .xqbox li{ list-style: none; cursor: pointer;}
    .xqnva{ display:block; width: 100%; height: 32px; line-height: 32px; margin:0; padding: 0;}
    .xqnva  .glyphicon-minus{ display: none;}
    .xqnva li:hover .glyphicon-minus{ display: inline-block; font-size: 14px; color: red; cursor: pointer;}
    .xqnva .glyphicon-plus-sign{ float: right; font-size: 21px;margin: 5px 5px 0 0; cursor: pointer;}
    .xqnva li.on{ background: #cccccc;}
</style> 

    <div class="row">
        <div class="col-md-12">
            <ol class="breadcrumb">
                <li><a href="../index.html">首页</a></li>
                <li><a href="index.html">产品管理</a></li>
                <li class="active">产品录入</li>
            </ol>
        </div>       
    </div>

<div class="modal-body" ng-init="init()">
    <form class="form-horizontal form-validation" name="formproduct" novalidate>
        <tabset>
            <tab heading="基本信息"  active> 
                    <div class="pr" >
                        <div class="form-group pt20 " beyond max-count='64'>
                            <label  class="col-sm-2 control-label lighter-weight">
                                <span class="err">*</span>
                                产品标题名称
                            </label>
                            <div class="col-sm-5">
                                <input type="text" class="form-control {{titlelostflag? 'ng-dirty ng-invalid ng-invalid-required':null}}" ng-model="bean.title"  ng-blur="setNetAddress();" name="title" ng-maxlength="64" required>
                                <div ng-show="formproduct.title.$dirty && formproduct.title.$invalid||titlelostflag">
                                    <span class="err" ng-show="formproduct.title.$error.required||titlelostflag" >请填写产品标题</span>
                                    <span class="err" ng-show="!formproduct.title.$error.required && formproduct.title.$error">add-标题名称长度为0~64字符</span>
                                </div>
                            </div>
                            
                                <span class="mess-zx">0</span>/64字符
                          </div>                                                                        
                    </div>

                    <div  left-information>
                             <button type="button" class="btn btn-default btn-hover" style="position: absolute;top: 76px;right: 160px;"> <i class="glyphicon glyphicon-plus-sign" style="padding: 0 4px;"></i>添加短标题</button>
                         <span  class="left-info left-info-st" beyond max-count='30'>
                                    <span>短标题名称</span>
                                    <input type="text" class="form-control left-info-input" ng-model="bean.shortTitle" name="shortTitle" ng-maxlength="30">
                                    <span class="mess-zx">0</span>/30字符
                                    <div ng-show="formproduct.shortTitle.$dirty && formproduct.shortTitle.$invalid" class="left-info-err">
                                        <span class="err" ng-show="formproduct.shortTitle.$error" style="margin-top: 6px;display: inline-block;">短标题长度为0~30字符</span>
                                    </div>
                        </span> 
                    </div>                    

                    <span class="dropdown" style="left: 844px;bottom: 38px;">
                            <a class="dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-question" style="padding: 0 4px;"></i>
                                帮助
                                <span class="caret"></span>
                            </a>
                            <ul  class="dropdown-menu">
                                <li>
                                    <a ng-click="hasLink()">外部链接</a>
                                </li>
                            </ul>
                    </span>           
                    

                    <div class="form-group">
                        <label class="col-sm-2 control-label lighter-weight">
                            <span class="err">*</span>
                            所属主要分类
                        </label>
                        <div class="col-sm-5">       
                            <!--下拉树-->
                            <div class="form-control" style="border:none;width: 366px;padding:0;">                       
                                <nested-combo-box  control-disabled="false" collection="collectionBean" change-event="itemChanged()" ng-model="classify.activeItemBean">
                                </nested-combo-box>                                
                            </div>                    
                         </div>                        
                        <button type="button" class="btn btn-default btn-hover" ng-click="addCategory()"> <i class="glyphicon glyphicon-plus-sign"></i> 关联分类</button>     
                        <div class="col-sm-12  guanlian {{isHx?'show':'hidden'}}">
                              <script type="text/ng-template" id="nodes_renderer.html">
                                    <div ui-tree-handle data-nodrag  ng-click= "movClass(node)" class="tree-node tree-node-content">
                                       
                                        {{node.name}}
                                    
                                    </div>
                                    <ol ui-tree-nodes="" ng-model="node.children" ng-class="{hidden: collapsed}">
                                        <li ng-repeat="node in node.children" ui-tree-node ng-include="'nodes_renderer.html'" ></li>
                                    </ol>
                                </script>      
                             <div class="panel panel-default tablist">
                                 
                                  <div class="panel-body tablistt">
                                    选择产品分类
                                  </div>
                                 
                                <div class="panel-footer tablistbody">
                                     <div ui-tree id="tree-root">
                                        <ol ui-tree-nodes ng-model="productClassList">
                                            <li ng-repeat="node in productClassList" ui-tree-node ng-include="'nodes_renderer.html'">{{node.children}}</li>
                                        </ol>
                                    </div>
                                    <ul class="list-group">
                                      <li class="list-group-item" ng-repeat = "product in productClassList.children" >{{product.name}}</li>
                                    </ul>
                                </div>
                                
                            </div>
                             <div class="panel panel-default tablist">
                                 
                                  <div class="panel-body tablistt">
                                    已选择分类
                                  </div>
                                 
                                  <div class="panel-footer tablistbody">
                                     <ul class="list-group">
                                      <li class="list-group-item" ng-repeat = "productClass in addedClass" ng-click= "deltClass($index,productClass)">{{productClass.name}}</li>
                                    </ul>
                                   </div>
                                
                            </div>
                        </div>                             
                    </div>
              
                     <div class="form-group" ng-show="isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">                            
                            网址
                        </label>
                        <div class="col-sm-5">  
                           <input type="text" class="form-control" ng-model="bean.linkUrl">                          
                        </div>                        
                    </div>
                   
                    <div class="form-group" beyond max-count='100' ng-show="!isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">                            
                           关联标签
                        </label>
                        <div class="col-sm-5">                           
                            <pre class="form-control" style="height:28px;">{{bean.cmsTags|showCtgsName}}</pre>                   
                        </div>                         
                        <button type="button" class="btn btn-default clean-btn" tag-lib result="bean.cmsTags" ng-model="bean.cmsTags">选择标签</button>
                    </div>                    
                
                    <div class="form-group">  
                        <label  class="col-sm-2 control-label lighter-weight">                            
                            产品图片
                        </label>                      
                        <div class="col-sm-2">
                           <a href="javascript:void(0)">
                                <div class="border-slt text-center" img-lib ng-model="img.product" data-img-count="8">
                                   
                                    <i class="fa fa-cloud-upload fa-3x" style="margin-top: 20px;" ></i>  
                                    <h6  style="margin-bottom: 20px;">点击上传</h6>
                                </div>                              
                            </a>
                        </div>  

                        <div class="col-sm-8"  ng-show = "img.product.length">
                            
                            <span class = "glyphicon glyphicon-menu-left loopleft" ng-show = "img.product.length>4"  ng-click = "mov()"></span>
                            <div class="loopbox col-sm-11">
                               <ul>
                                    <li  ng-repeat = "img in img.product">
                                     <img  style="height: 128px;width: 128px;" ng-src="{{img.path}}" >  
                                     <input type="text" placeholder="请写图片描述" class="form-control" ng-model="img.alt"> 
                                    </li>
                               </ul>
                            </div>
                            <span  class = "glyphicon glyphicon-menu-right loopright" ng-show = "img.product.length>4"  ng-click = "back()"></span>                               
                        </div>
                    </div>    
                     <div class="form-group" ng-show="!isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">

                            详情内容录入
                        </label>
                        <div class="col-sm-8 xqbox" style="z-index: 1;">
                          <ul class = "xqnva">
                            <!-- {{bean}} -->
                              <li ng-repeat = "xnav in bean.tabContents" ng-class=" xnav.checked ? 'on':''" ng-click = "goChange(xnav,$index)">{{xnav.name}} <span ng-if="$index!=0" class="glyphicon glyphicon-minus" ng-click = "deltXqList($index)"></span></li>

                              <span  class="glyphicon glyphicon-plus-sign" ng-click = "addXq()"></span> 

                          </ul>
                          <div ueditor ng-model="bean.contentxq" config="configxq"></div>                        
                        </div>                                       
                    </div>  
                    <div class="form-group" ng-show="!isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">

                            产品录入介绍
                        </label>
                        <div class="col-sm-8" style="z-index: 1;">
                          <div ueditor ng-model="bean.content" config="configContent"></div>                        
                        </div>                                       
                    </div>  
                      
                   
                <div class="form-group" ng-show="isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">                        
                           产品简介
                        </label>
                        <div class="col-sm-8" style="z-index: 1;">                          
                            <div ueditor ng-model="bean.desc" config="configDesc"></div>                            
                        </div>                                            
                </div> 
                    
                <div class="form-group" ng-show="isLinkFlag">
                    <label  class="col-sm-2 control-label lighter-weight">选项</label>
                    <div class="col-sm-8">
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isRecommend">推荐
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isDisplayTop">置顶
                        </label>
                    </div>
                </div>
                 <div class="form-group" ng-show="isLinkFlag">
                     <label  class="col-sm-2 control-label lighter-weight">显示当前产品</label>
                     <div class="col-sm-8">
                         <label class="radio-inline">
                             <input type="radio" name="radioChecked1" value="true" ng-model="bean.isDisplay">显示</label>
                         <label class="radio-inline">
                             <input type="radio" name="radioChecked1" value="false" ng-model="bean.isDisplay">隐藏</label>
                     </div>
                 </div>
                    <div class="form-group" ng-show="isLinkFlag">
                        <label  class="col-sm-2 control-label lighter-weight">                            
                            发布时间
                        </label>
                        <div class="col-sm-5">                                                       
                           <pick-datetime class="form-control" ng-model="bean.publishTime"></pick-datetime>
                        </div>                                              
                    </div> 
                    <div style="clear:both;"></div> 
            </tab>
            
            <tab heading="SEO搜索引擎设置" status="infoSeo" ng-show="infoSeo"> 
                     <div class="form-group pt20" beyond max-count='20'>
                        <label  class="col-sm-2 control-label lighter-weight">
                            <span class="err">*</span>
                            网页访问地址
                        </label>
                         <div class="col-sm-5">
                            <input type="text" class="form-control" ng-model="bean.seo.staticPageName" ng-blur="verRepeat()" name="staticPageName"  ng-maxlength="30" required>
                            <div ng-show="formproduct.staticPageName.$dirty && formproduct.staticPageName.$invalid">
                                <span class="err" ng-show="formproduct.staticPageName.$error.required">请填写网页访问地址名称</span>
                                <span class="err" ng-show="!formproduct.staticPageName.$error.required && formproduct.staticPageName.$error">网页访问地址名称长度为0~30字符</span>
                            </div>
                        </div>
                        <span class="mess-zx">0</span>/30字符
                    </div>

                    <div class="form-group" beyond max-count='64'>
                        <label  class="col-sm-2 control-label lighter-weight pt0">                           
                            网页标题
                            <br>(Title)</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" ng-model="bean.seo.title" name="aSeoTitle" ng-maxlength="64">
                            <div ng-show="formproduct.aSeoTitle.$dirty && formproduct.aSeoTitle.$invalid">                              
                                <span class="err" ng-show="formproduct.aSeoTitle.$error">网页标题长度为0~64字符</span>
                            </div>
                        </div>
                        <span class="mess-zx">0</span>/64字符
                    </div>
                    <div class="form-group" beyond max-count='100'>
                        <label  class="col-sm-2 control-label lighter-weight pt0">                            
                            网页关键词
                            <br>(Keywords)</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" ng-model="bean.seo.keyword" name="aSeoKeyword" ng-maxlength="100">
                            <div ng-show="formproduct.aSeoKeyword.$dirty && formproduct.aSeoKeyword.$invalid">                                
                                <span class="err" ng-show="formproduct.aSeoKeyword.$error">网页关键词长度为0~100字符</span>
                            </div>
                            <span class="err" ng-show="keyWordErr">关键字使用逗号、空格和分隔符，并不能超过5个关键字</span>
                        </div>
                        <span class="mess-zx">0</span>/100字符
                    </div>
                    <div class="form-group" beyond max-count='150'>
                        <label  class="col-sm-2 control-label lighter-weight pt0">                           
                            网页描述
                            <br>(Description)</label>
                        <div class="col-sm-8 " style="z-index: 1;">                             
                            <!-- <div ueditor ng-model="bean.seo.desc" config="configSeoDesc"></div>  --> 
                            <textarea class="form-control ng-pristine " rows="3" ng-model="bean.seo.desc"  ng-maxlength="150" ></textarea>                       
                        </div>                        
                    </div> 
                    <div style="clear:both;"></div>              
            </tab>    

            <tab heading="其他属性" status="infoOther" ng-show="infoOther"> 

               
                <div class="form-group">
                    <label  class="col-sm-2 control-label lighter-weight">启用第三方商城</label>
                    <div class="col-sm-8">
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isEnableThirdPartyMall">启用
                        </label>
                      
                    </div>
                </div>
				<div class="pr" left-information ng-show = "bean.isEnableThirdPartyMall">
                        <div class="form-group pt20 " beyond max-count='50'>
                            <label  class="col-sm-2 control-label lighter-weight">                                
                                第三方商城地址
                            </label>
                            <div class="col-sm-5">
                                <input type="text" class="form-control" ng-model="bean.thirdPartyMallUrl" name="thirdPartyMallUrl">
                            </div>
                            <div>                           
                            </div>                        
                        </div>
                </div> 
                <div class="form-group">
                    <label  class="col-sm-2 control-label lighter-weight">                                
                        点击次数
                    </label>
                    <div class="col-sm-5">
                        <input type="text" class="form-control"   ng-model="bean.clicks" name="clicks" ng-pattern="/^[1-9]\d*$/">
                        <div ng-show="formproduct.clicks.$dirty && formproduct.clicks.$invalid">                               
                            <span class="err" ng-show="formproduct.clicks.$error">点击次数必须是大于0的整数</span>
                        </div>
                    </div>                                      
                </div>

                
                <!-- <div class="form-group">
                    <label  class="col-sm-2 control-label lighter-weight">查看权限</label>
                    <div class="col-sm-8">
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isRecommend">普通会晕
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isDisplayTop">高级会员
                        </label>
                         <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isDisplayTop">会员
                        </label>
                         <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isDisplayTop">代理商
                        </label>
                    </div>
                </div> -->
                <div class="form-group">
                    <label  class="col-sm-2 control-label lighter-weight">选项</label>
                    <div class="col-sm-8">
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isRecommend">推荐
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="bean.isDisplayTop">置顶
                        </label>
                    </div>
                </div>
                 <div class="form-group">
                     <label  class="col-sm-2 control-label lighter-weight">显示当前分类</label>
                     <div class="col-sm-8">
                         <label class="radio-inline">
                             <input type="radio" name="radioChecked" value="true" ng-model="bean.isDisplay">显示</label>
                         <label class="radio-inline">
                             <input type="radio" name="radioChecked" value="false" ng-model="bean.isDisplay">隐藏</label>
                     </div>
                 </div>

                <div class="form-group">
                    <label  class="col-sm-2 control-label lighter-weight">                            
                        发布时间
                    </label>
                    <div class="col-sm-5">                                                       
                       <pick-datetime class="form-control" ng-model="bean.publishTime"></pick-datetime>
                    </div>                                              
                </div>
                <div style="clear:both;"></div>
            </tab>    
             
            
        </tabset>
       <div class="form-group pt20">
                <div class="col-sm-10 text-center">
                    
                    <button type="submit" class="btn btn-warning w100" ng-disabled="!((formproduct.title.$valid&&isLinkFlag)||(formproduct.$valid&&formproduct.$dirty))"  ng-click="saveAirticle()">保存</button>
                    <button class="btn btn-default w100 ml" ng-click="clearFormBtn()">重置</button>
                </div>
        </div> 
    </form>
</div> 


     <!--添加分类-->
    <div class="col-sm-6 dialog" ng-show="categoryDialog">
        <div class="dialog-titlebar">
            <span class="dialog-title">快速添加分类</span>    
            <a class="close-btn" ng-click="closeCategoryDialog()"><i class="glyphicon glyphicon-remove"></i></a>      
        </div>
        <div style="overflow-x:hidden;overflow-y:auto;height: 300px;">
            <div class="form-group">
                <form class="form-horizontal form-validation form-airticle" name="formAddCategory" novalidate>
                   <div class="form-group" beyond max-count='64' style="margin-top:20px;">
                        <label  class="col-sm-3 control-label lighter-weight pt0">
                            <span class="err">*</span>
                            分类名称
                            </label>
                        <div class="col-sm-6">
                            <input class="form-control" ng-model="cTitle" name="cTitle"  ng-maxlength="64" required>
                            <div ng-show="formAddCategory.cTitle.$dirty && formAddCategory.cTitle.$invalid">
                                <span class="err" ng-show="formAddCategory.cTitle.$error.required">请填写分类名称</span>
                                <span class="err" ng-show="!formAddCategory.cTitle.$error.required && formAddCategory.cTitle.$error">分类名称长度为0~64字符</span>
                            </div>                             
                        </div>
                         <span class="mess-zx">0</span>/64字符
                    </div>                    
                    <div class="form-group">
                        <label  class="col-sm-3 control-label lighter-weight pt0">
                            <span class="err">*</span>
                            上级分类
                            </label>
                        <div class="col-sm-6">                           
                            <nested-combo-box  control-disabled="false"  collection="ksCollectionBean" ng-model="classify.ksActiveItemBean">
                            </nested-combo-box>                            
                        </div>
                         <span class="mess-zx">分类可分多级</span>                        
                    </div> 

                     <div class="form-group">                        
                        <label  class="col-sm-3 control-label">                          
                            <span class="glyphicon glyphicon-exclamation-sign" style="color:#eea236;font-size:20px;"></span>                        
                        </label> 
                          <span class="mess-zx">设置更多分类信息，请到分类列表进行详细设置，如SEO、内页排版</span>                        
                    </div> 
                    
                    <div class="form-group">
                        <div class="col-sm-offset-4 col-sm-10">
                          <button type="submit" class="btn btn-warning" ng-click="saveAddCategory()" ng-disabled="formAddCategory.$invalid">保存</button>
                          <button class="btn btn-default" ng-click="closeCategoryDialog()">取消</button>
                        </div>
                    </div>                   
                </form>
            </div>
        </div>       
    </div>
    <!--mask-->
    <div class="mask" ng-show="mask"></div>  